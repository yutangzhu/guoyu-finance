# 理财软件（国宇制冷理财管家）上云部署说明

你的理财软件是 **Python + Streamlit**，不能直接部署在 **Vercel** 上（Vercel 适合 Node/静态站点，不适合常驻的 Streamlit 进程）。推荐用 **Streamlit Community Cloud** 部署，和 GitHub 同源、免费、一键部署。

---

## 一、当前仓库结构（已就绪）

- 根目录：Vercel 用的 Node 首页（guoyu-finance.vercel.app）
- **`finance-app/`**：理财软件（Streamlit），用于部署到 Streamlit Cloud

把下面步骤做完并 push 到 GitHub 后，即可在 Streamlit Cloud 里从本仓库部署。

---

## 二、部署到 Streamlit Community Cloud（推荐）

### 1. 推送代码到 GitHub

在项目根目录（`新建文件夹`）执行：

```bat
git add finance-app
git add 部署说明-理财软件上云.md
git commit -m "feat: add finance-app for Streamlit Cloud"
git push
```

### 2. 在 Streamlit Cloud 创建应用

1. 打开 **https://share.streamlit.io**
2. 用 **GitHub** 登录
3. 点击 **“New app”**
4. 填写：
   - **Repository**：`yutangzhu/guoyu-finance`
   - **Branch**：`main`
   - **Main file path**：`app.py`
   - **App directory**（应用根目录）：**`finance-app`**（必填，否则会找不到 `app.py`）
5. 点击 **Deploy**，等待构建完成。

### 3. 配置登录账号与密码（防止他人随意访问）

应用已支持**账号密码登录**，账号和密码通过 **Secrets** 配置，不会写在代码里。

1. 在 Streamlit Cloud 打开你的应用页面，点击右上角 **⋮**（或 **Manage app**）→ **Settings**（或部署时点 **Advanced settings**）。
2. 在 **Secrets** 文本框中填入（按 TOML 格式，把 `你的账号` 和 `你的密码` 改成自己的）：

```toml
LOGIN_USERNAME = "你的账号"
LOGIN_PASSWORD = "你的密码"
```

3. 保存后约 1 分钟生效。之后访问应用会先出现登录页，输入上述账号密码才能进入。

**本地运行**：在 `finance-app` 下新建 `.streamlit/secrets.toml`，内容同上，即可本地登录。

### 4. 访问地址

部署成功后会得到一个地址，形如：

`https://你的应用名-你的用户名-xxx.streamlit.app`

---

## 三、数据与限制说明

- **Streamlit Cloud 免费版**：应用目录下的文件（含 `data/`）在**重启或重新部署后可能被清空**，适合演示或短期使用。
- 若需要**长期持久化**：后续可把数据改为云数据库（如 Supabase、Firebase）或对象存储，再改 `app.py` 的读写逻辑。

---

## 四、两个“云”的分工

| 地址 | 用途 |
|------|------|
| **guoyu-finance.vercel.app** | 当前 Node 首页（Vercel） |
| **xxx.streamlit.app** | 理财软件完整功能（Streamlit Cloud） |

可在 Vercel 首页加一个链接，跳转到 Streamlit 理财应用。
